{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Matt/Desktop/movie-quiz-new/movie-quiz/movie-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/Matt/Desktop/movie-quiz-new/movie-quiz/movie-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:/Users/Matt/Desktop/movie-quiz-new/movie-quiz/movie-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/Matt/Desktop/movie-quiz-new/movie-quiz/movie-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:/Users/Matt/Desktop/movie-quiz-new/movie-quiz/movie-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:/Users/Matt/Desktop/movie-quiz-new/movie-quiz/movie-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/Matt/Desktop/movie-quiz-new/movie-quiz/movie-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import{ClipLoader}from'react-spinners';import GMContent from'./GMContent';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var GMQuestion=/*#__PURE__*/function(_React$Component){_inherits(GMQuestion,_React$Component);var _super=_createSuper(GMQuestion);function GMQuestion(props){var _this;_classCallCheck(this,GMQuestion);_this=_super.call(this,props);_this._mounted=false;_this.controller=new AbortController();_this.getQuestion=_this.getQuestion.bind(_assertThisInitialized(_this));_this.removeQuestion=_this.removeQuestion.bind(_assertThisInitialized(_this));_this.state={questionAvailable:false,currentQueue:[]};return _this;}_createClass(GMQuestion,[{key:\"getQuestion\",value:// getting a question\nfunction(){var _getQuestion=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _this2=this;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(this.props.queue.length===0){this.setState({questionAvailable:false});}_context.next=3;return fetch('https://bigfatmoviequiz.herokuapp.com/getMovieAPI',{signal:this.props.controller.signal}).then(function(res){return res.json();}).then(function(data){if(_this2._mounted===true){var indexCheck=_this2.state.currentQueue.indexOf(data.actorID);if(indexCheck===-1){var newQueue=_this2.state.currentQueue;newQueue.push([data.actor1ID,data.actor2ID,data.movieID]);// actor1 ID, actor2 ID, movieID\n_this2.setState({currentQueue:newQueue});_this2.props.enqueue(data);_this2.setState({questionAvailable:true});}else{_this2.getQuestion();}}}).catch(function(error){if(error.name!==\"AbortError\"){_this2.getQuestion();}});case 3:case\"end\":return _context.stop();}}},_callee,this);}));function getQuestion(){return _getQuestion.apply(this,arguments);}return getQuestion;}()},{key:\"removeQuestion\",value:function removeQuestion(){if(this.props.queue.length===1){this.setState({questionAvailable:false});}this.props.dequeue();}},{key:\"componentDidMount\",value:function componentDidMount(){var _this3=this;// onload of the component\nthis._mounted=true;if(this.props.queue.length===0){this.getQuestion();this.getQuestion();this.getQuestion();}else{this.setState({questionAvailable:true});}return function(){return _this3.setState({_mounted:false});};}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.controller.abort();this._mounted=false;}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(_Fragment,{children:this.state.questionAvailable?/*#__PURE__*/_jsx(GMContent,{question:this.props.queue[0],gameOver:this.props.gameOver,increaseScore:this.props.increaseScore,resetScore:this.props.resetScore,removeQuestion:this.removeQuestion,newQuestion:this.getQuestion,score:this.props.score}):/*#__PURE__*/_jsx(\"div\",{className:\"contentBox\",children:/*#__PURE__*/_jsx(\"div\",{class:\"fade-in\",children:/*#__PURE__*/_jsx(\"div\",{class:\"spinner-border text-light\",role:\"status\"})})})});}}]);return GMQuestion;}(React.Component);export default GMQuestion;","map":{"version":3,"sources":["C:/Users/Matt/Desktop/movie-quiz-new/movie-quiz/movie-app/src/Components/GuessMovie/GMComponents/GMQuestion.js"],"names":["React","ClipLoader","GMContent","GMQuestion","props","_mounted","controller","AbortController","getQuestion","bind","removeQuestion","state","questionAvailable","currentQueue","queue","length","setState","fetch","signal","then","res","json","data","indexCheck","indexOf","actorID","newQueue","push","actor1ID","actor2ID","movieID","enqueue","catch","error","name","dequeue","abort","gameOver","increaseScore","resetScore","score","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { ClipLoader } from 'react-spinners';\r\n\r\nimport GMContent from './GMContent';\r\n\r\nclass GMQuestion extends React.Component {\r\n    _mounted = false;\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.getQuestion = this.getQuestion.bind(this);\r\n        this.removeQuestion = this.removeQuestion.bind(this);\r\n        this.state = { questionAvailable: false, currentQueue: [] };\r\n    }\r\n\r\n    controller = new AbortController();\r\n\r\n    // getting a question\r\n\r\n    async getQuestion() {\r\n        if (this.props.queue.length === 0) {\r\n            this.setState({ questionAvailable: false});\r\n        }\r\n\r\n        await fetch('https://bigfatmoviequiz.herokuapp.com/getMovieAPI', { signal: this.props.controller.signal }).then(res => res.json()).then(data => {\r\n            if (this._mounted === true) {\r\n                var indexCheck = this.state.currentQueue.indexOf(data.actorID);\r\n\r\n                if (indexCheck === -1) {\r\n                    var newQueue = this.state.currentQueue;\r\n                    newQueue.push([data.actor1ID, data.actor2ID, data.movieID]); // actor1 ID, actor2 ID, movieID\r\n                    this.setState({ currentQueue: newQueue} );\r\n                    this.props.enqueue(data);\r\n                    this.setState({ questionAvailable: true });\r\n                } else {\r\n                    this.getQuestion();\r\n                }\r\n            }\r\n        }).catch((error) => {\r\n            if (error.name !== \"AbortError\") {\r\n                this.getQuestion();\r\n            }\r\n        });\r\n    }\r\n\r\n    removeQuestion() {\r\n        if (this.props.queue.length === 1) {\r\n            this.setState({ questionAvailable: false});\r\n        }\r\n        this.props.dequeue();\r\n    }\r\n\r\n    componentDidMount() { // onload of the component\r\n        this._mounted = true;\r\n        if (this.props.queue.length === 0) {\r\n            this.getQuestion();\r\n            this.getQuestion();\r\n            this.getQuestion();\r\n        } else {\r\n            this.setState({ questionAvailable: true});\r\n        }\r\n        return () => this.setState({_mounted: false});\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.controller.abort();\r\n        this._mounted = false;\r\n    }\r\n\r\n    render() {\r\n        return(\r\n            <>\r\n                {this.state.questionAvailable ? <GMContent \r\n                                                    question={this.props.queue[0]} \r\n                                                    gameOver={this.props.gameOver} \r\n                                                    increaseScore={this.props.increaseScore}\r\n                                                    resetScore={this.props.resetScore}\r\n                                                    removeQuestion={this.removeQuestion} \r\n                                                    newQuestion={this.getQuestion}\r\n                                                    score={this.props.score} /> \r\n                                                    : \r\n                                                    <div className=\"contentBox\">\r\n                                                        <div class=\"fade-in\">\r\n                                                            <div class=\"spinner-border text-light\" role=\"status\">\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                    }\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nexport default GMQuestion;"]},"metadata":{},"sourceType":"module"}