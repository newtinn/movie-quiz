{"ast":null,"code":"import _classCallCheck from\"C:/Users/Matt/Desktop/movie-quiz-new/movie-quiz/movie-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/Matt/Desktop/movie-quiz-new/movie-quiz/movie-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:/Users/Matt/Desktop/movie-quiz-new/movie-quiz/movie-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:/Users/Matt/Desktop/movie-quiz-new/movie-quiz/movie-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/Matt/Desktop/movie-quiz-new/movie-quiz/movie-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import{ClipLoader}from'react-spinners';import GMContent from'./GMContent';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var controller=new AbortController();var signal=controller.signal;var GMQuestion=/*#__PURE__*/function(_React$Component){_inherits(GMQuestion,_React$Component);var _super=_createSuper(GMQuestion);function GMQuestion(props){var _this;_classCallCheck(this,GMQuestion);_this=_super.call(this,props);_this._mounted=false;_this.getQuestion=_this.getQuestion.bind(_assertThisInitialized(_this));_this.removeQuestion=_this.removeQuestion.bind(_assertThisInitialized(_this));_this.state={questionAvailable:false,currentQueue:[]};return _this;}// getting a question\n_createClass(GMQuestion,[{key:\"getQuestion\",value:function getQuestion(){var _this2=this;if(this.props.queue.length===0){this.setState({questionAvailable:false});}if(this._mounted===true){fetch('https://bigfatmoviequiz.herokuapp.com/getMovieAPI',{signal:signal}).then(function(res){return res.json();}).then(function(data){if(_this2._mounted===true){var indexCheck=_this2.state.currentQueue.indexOf(data.actorID);if(indexCheck===-1){var newQueue=_this2.state.currentQueue;newQueue.push([data.actor1ID,data.actor2ID,data.movieID]);// actor1 ID, actor2 ID, movieID\n_this2.setState({currentQueue:newQueue});_this2.props.enqueue(data);_this2.setState({questionAvailable:true});}else{console.log(\"data already exists\");_this2.getQuestion();}}}).catch(function(error){if(error.name!==\"AbortError\"){_this2.getQuestion();}});}}},{key:\"removeQuestion\",value:function removeQuestion(){if(this.props.queue.length===1){this.setState({questionAvailable:false});}this.props.dequeue();}},{key:\"componentDidMount\",value:function componentDidMount(){var _this3=this;// onload of the component\nthis._mounted=true;if(this.props.queue.length===0){this.getQuestion();this.getQuestion();this.getQuestion();}else{this.setState({questionAvailable:true});}return function(){return _this3.setState({_mounted:false});};}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){controller.abort();this._mounted=false;}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(_Fragment,{children:this.state.questionAvailable?/*#__PURE__*/_jsx(GMContent,{question:this.props.queue[0],gameOver:this.props.gameOver,increaseScore:this.props.increaseScore,resetScore:this.props.resetScore,removeQuestion:this.removeQuestion,newQuestion:this.getQuestion,score:this.props.score}):/*#__PURE__*/_jsx(\"div\",{className:\"contentBox\",children:/*#__PURE__*/_jsx(\"div\",{class:\"fade-in\",children:/*#__PURE__*/_jsx(\"div\",{class:\"spinner-border text-light\",role:\"status\"})})})});}}]);return GMQuestion;}(React.Component);export default GMQuestion;","map":{"version":3,"sources":["C:/Users/Matt/Desktop/movie-quiz-new/movie-quiz/movie-app/src/Components/GuessMovie/GMComponents/GMQuestion.js"],"names":["React","ClipLoader","GMContent","controller","AbortController","signal","GMQuestion","props","_mounted","getQuestion","bind","removeQuestion","state","questionAvailable","currentQueue","queue","length","setState","fetch","then","res","json","data","indexCheck","indexOf","actorID","newQueue","push","actor1ID","actor2ID","movieID","enqueue","console","log","catch","error","name","dequeue","abort","gameOver","increaseScore","resetScore","score","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { ClipLoader } from 'react-spinners';\r\n\r\nimport GMContent from './GMContent';\r\n\r\nconst controller = new AbortController();\r\nconst { signal } = controller;\r\n\r\nclass GMQuestion extends React.Component {\r\n    _mounted = false;\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.getQuestion = this.getQuestion.bind(this);\r\n        this.removeQuestion = this.removeQuestion.bind(this);\r\n        this.state = { questionAvailable: false, currentQueue: [] };\r\n    }\r\n\r\n    // getting a question\r\n    getQuestion() {\r\n        if (this.props.queue.length === 0) {\r\n            this.setState({ questionAvailable: false});\r\n        }\r\n\r\n        if (this._mounted === true) {\r\n            fetch('https://bigfatmoviequiz.herokuapp.com/getMovieAPI', { signal }).then(res => res.json()).then(data => {\r\n                if (this._mounted === true) {\r\n                    var indexCheck = this.state.currentQueue.indexOf(data.actorID);\r\n\r\n                    if (indexCheck === -1) {\r\n                        var newQueue = this.state.currentQueue;\r\n                        newQueue.push([data.actor1ID, data.actor2ID, data.movieID]); // actor1 ID, actor2 ID, movieID\r\n                        this.setState({ currentQueue: newQueue} );\r\n                        this.props.enqueue(data);\r\n                        this.setState({ questionAvailable: true });\r\n                    } else {\r\n                        console.log(\"data already exists\");\r\n                        this.getQuestion();\r\n                    }\r\n                }\r\n            }).catch((error) => {\r\n                if (error.name !== \"AbortError\") {\r\n                    this.getQuestion();\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    removeQuestion() {\r\n        if (this.props.queue.length === 1) {\r\n            this.setState({ questionAvailable: false});\r\n        }\r\n        this.props.dequeue();\r\n    }\r\n\r\n    componentDidMount() { // onload of the component\r\n        this._mounted = true;\r\n        if (this.props.queue.length === 0) {\r\n            this.getQuestion();\r\n            this.getQuestion();\r\n            this.getQuestion();\r\n        } else {\r\n            this.setState({ questionAvailable: true});\r\n        }\r\n        return () => this.setState({_mounted: false});\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        controller.abort();\r\n        this._mounted = false;\r\n    }\r\n\r\n    render() {\r\n        return(\r\n            <>\r\n                {this.state.questionAvailable ? <GMContent \r\n                                                    question={this.props.queue[0]} \r\n                                                    gameOver={this.props.gameOver} \r\n                                                    increaseScore={this.props.increaseScore}\r\n                                                    resetScore={this.props.resetScore}\r\n                                                    removeQuestion={this.removeQuestion} \r\n                                                    newQuestion={this.getQuestion}\r\n                                                    score={this.props.score} /> \r\n                                                    : \r\n                                                    <div className=\"contentBox\">\r\n                                                        <div class=\"fade-in\">\r\n                                                            <div class=\"spinner-border text-light\" role=\"status\">\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                    }\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nexport default GMQuestion;"]},"metadata":{},"sourceType":"module"}