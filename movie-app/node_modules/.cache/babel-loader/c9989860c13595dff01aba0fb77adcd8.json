{"ast":null,"code":"import _classCallCheck from\"C:/Users/Matt/Desktop/movie-quiz-new/movie-quiz/movie-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/Matt/Desktop/movie-quiz-new/movie-quiz/movie-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:/Users/Matt/Desktop/movie-quiz-new/movie-quiz/movie-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:/Users/Matt/Desktop/movie-quiz-new/movie-quiz/movie-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/Matt/Desktop/movie-quiz-new/movie-quiz/movie-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import{ClipLoader}from'react-spinners';import GAContent from'./GAContent';import{isMobile}from'react-device-detect';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var GAQuestion=/*#__PURE__*/function(_React$Component){_inherits(GAQuestion,_React$Component);var _super=_createSuper(GAQuestion);function GAQuestion(props){var _this;_classCallCheck(this,GAQuestion);_this=_super.call(this,props);_this._mounted=false;_this.controller=new AbortController();_this.getQuestion=_this.getQuestion.bind(_assertThisInitialized(_this));_this.removeQuestion=_this.removeQuestion.bind(_assertThisInitialized(_this));_this.state={questionAvailable:false,currentQueue:[]};return _this;}_createClass(GAQuestion,[{key:\"getQuestion\",value:// getting a question\nfunction getQuestion(){var _this2=this;if(this.props.queue.length===0){this.setState({questionAvailable:false});}if(this._mounted===true){fetch('https://bigfatmoviequiz.herokuapp.com/getActorAPI',{signal:this.controller.signal}).then(function(res){return res.json();}).then(function(data){if(_this2._mounted===true){var indexCheck=_this2.state.currentQueue.indexOf(data.actorID);if(indexCheck===-1){var newQueue=_this2.state.currentQueue;newQueue.push(data.actorID);_this2.setState({currentQueue:newQueue});_this2.props.enqueue(data);_this2.setState({questionAvailable:true});}else{_this2.getQuestion();}if(!isMobile){if(_this2._mounted===true){if(_this2.props.queue.length<_this2.props.queueMaxSize){_this2.getQuestion();}}}}}).catch(function(error){if(error.name!==\"AbortError\"){_this2.getQuestion();}});}}},{key:\"removeQuestion\",value:function removeQuestion(){if(this.props.queue.length===1){this.setState({questionAvailable:false});}this.props.dequeue();}},{key:\"componentDidMount\",value:function componentDidMount(){var _this3=this;// onload of the component\nthis._mounted=true;if(this.props.queue.length===0){this.getQuestion();//this.getQuestion();\n//this.getQuestion();\n}else{this.setState({questionAvailable:true});}return function(){return _this3.setState({_mounted:false});};}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.controller.abort();this._mounted=false;}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(_Fragment,{children:this.state.questionAvailable?/*#__PURE__*/_jsx(GAContent,{question:this.props.queue[0],gameOver:this.props.gameOver,increaseScore:this.props.increaseScore,resetScore:this.props.resetScore,removeQuestion:this.removeQuestion,newQuestion:this.getQuestion,score:this.props.score}):/*#__PURE__*/_jsx(\"div\",{className:\"contentBox\",children:/*#__PURE__*/_jsx(\"div\",{class:\"fade-in\",children:/*#__PURE__*/_jsx(\"div\",{class:\"spinner-border text-light\",role:\"status\"})})})});}}]);return GAQuestion;}(React.Component);export default GAQuestion;","map":{"version":3,"sources":["C:/Users/Matt/Desktop/movie-quiz-new/movie-quiz/movie-app/src/Components/GuessActor/GAComponents/GAQuestion.js"],"names":["React","ClipLoader","GAContent","isMobile","GAQuestion","props","_mounted","controller","AbortController","getQuestion","bind","removeQuestion","state","questionAvailable","currentQueue","queue","length","setState","fetch","signal","then","res","json","data","indexCheck","indexOf","actorID","newQueue","push","enqueue","queueMaxSize","catch","error","name","dequeue","abort","gameOver","increaseScore","resetScore","score","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { ClipLoader } from 'react-spinners';\r\n\r\nimport GAContent from './GAContent';\r\n\r\nimport {isMobile} from 'react-device-detect';\r\n\r\nclass GAQuestion extends React.Component {\r\n    _mounted = false;\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.getQuestion = this.getQuestion.bind(this);\r\n        this.removeQuestion = this.removeQuestion.bind(this);\r\n        this.state = { questionAvailable: false, currentQueue: [] };\r\n    }\r\n\r\n    controller = new AbortController();\r\n\r\n    // getting a question\r\n    getQuestion() {\r\n        if (this.props.queue.length === 0) {\r\n            this.setState({ questionAvailable: false});\r\n        }\r\n\r\n        if (this._mounted === true) {\r\n            fetch('https://bigfatmoviequiz.herokuapp.com/getActorAPI', {signal: this.controller.signal}).then(res => res.json()).then(data => {\r\n                if (this._mounted === true) {\r\n                    var indexCheck = this.state.currentQueue.indexOf(data.actorID);\r\n                    if (indexCheck === -1) {\r\n                        var newQueue = this.state.currentQueue;\r\n                        newQueue.push(data.actorID);\r\n                        this.setState({ currentQueue: newQueue} );\r\n                        this.props.enqueue(data);\r\n                        this.setState({ questionAvailable: true });\r\n                    } else {\r\n                        this.getQuestion();\r\n                    }\r\n\r\n                    if (!isMobile) {\r\n                        if (this._mounted === true) {\r\n                            if (this.props.queue.length < this.props.queueMaxSize) {\r\n                                this.getQuestion();\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }).catch((error) => {\r\n                if (error.name !== \"AbortError\") {\r\n                    this.getQuestion();\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    removeQuestion() {\r\n        if (this.props.queue.length === 1) {\r\n            this.setState({ questionAvailable: false});\r\n        }\r\n        this.props.dequeue();\r\n    }\r\n\r\n    componentDidMount() { // onload of the component\r\n        this._mounted = true;\r\n        if (this.props.queue.length === 0) {\r\n            this.getQuestion();\r\n            //this.getQuestion();\r\n            //this.getQuestion();\r\n        } else {\r\n            this.setState({ questionAvailable: true});\r\n        }\r\n        return () => this.setState({_mounted: false});\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.controller.abort();\r\n        this._mounted = false;\r\n    }\r\n\r\n    render() {\r\n        return(\r\n            <>\r\n                {this.state.questionAvailable ? <GAContent \r\n                                                    question={this.props.queue[0]} \r\n                                                    gameOver={this.props.gameOver} \r\n                                                    increaseScore={this.props.increaseScore}\r\n                                                    resetScore={this.props.resetScore}\r\n                                                    removeQuestion={this.removeQuestion} \r\n                                                    newQuestion={this.getQuestion}\r\n                                                    score={this.props.score} /> \r\n                                                    : \r\n                                                    <div className=\"contentBox\">\r\n                                                        <div class=\"fade-in\">\r\n                                                            <div class=\"spinner-border text-light\" role=\"status\">\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                    }\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nexport default GAQuestion;"]},"metadata":{},"sourceType":"module"}